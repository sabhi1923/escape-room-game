<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Escape Room: Cyber Shield Challenge</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: url('https://www.techfunnel.com/wp-content/uploads/2022/02/types-of-hackers.jpg') no-repeat center center fixed;
      background-size: cover;
      color: white;
      text-align: center;
      padding: 20px;
    }
    .container {
      max-width: 700px;
      margin: auto;
      background: rgba(0, 0, 0, 0.7);
      padding: 25px;
      border-radius: 15px;
      box-shadow: 0 0 20px rgba(0,0,0,0.5);
      position: relative;
    }
    h1 {
      margin-bottom: 20px;
      color : #8833a1;
      font-family: 'Times New Roman';
      font-size: 50px;
      text-shadow: -2px -2px 0 #000, 2px -2px 0 #000, -2px 2px 0 #000, 2px 2px 0 #000;
    }
    .question-box {
      display: none;
    }
    .question-box.active {
      display: block;
      
    }
    .question-text{
        text-align: left;
        font-size: 23px;
        font-family: 'Times New Roman';
        line-height: 40px;
    }
    button {
      background-color: #6b2581;
      color: white;
      border: none;
      padding: 10px 20px;
      margin: 10px;
      font-size: 20px;
      font-family: 'Times New Roman';
      border-radius: 5px;
      cursor: pointer;
      transition: 0.3s;
    }
    button:hover {
      background-color: #2b1430;
    }
    .result {
      display: none;
      font-size: 25px;
      font-weight: bold;
      color: #f3e7ed;
    }
    .hint {
      color: #17ea4f;
      margin-top: 10px;
      font-family: 'Times New Roman';
      font-size: 22px;
    }
    .hacker-msg {
      margin-top: 10px;
      color: #ff4444;
      font-weight: bold;
      display: none;
    }
    #login-box {
      display: block;
    }
    .result{
      font-family: 'Times New Roman';
     color: skyblue; 
  

    }
  </style>
</head>
<body>

<audio id="bg-music" loop>
  <source src="assets\audio\cyber-horror.mp3"  type="audio/mpeg">
</audio>

<audio id="fail-music">
  <source src="assets\audio\cyber-loss_msg.mp3" type="audio/mpeg">
</audio>

<audio id="win-music">
  <source src="assets\audio\cyber-win_msg.mp3" type="audio/mpeg">
</audio>


<div class="container" id="login-box">
  <h1>üîê Escape Room Login</h1>
  <input type="text" id="username" placeholder="Username" /><br><br>
  <input type="password" id="password" placeholder="Password" /><br><br>
  <button onclick="login()">Login</button>
  <div id="login-error" style="color: red; margin-top: 10px;"></div>
</div>

<div class="container" id="quiz-box" style="display:none;">
  <h1>Cyber Escape Room Challenge</h1>
  <div id="questions"></div>
  <div class="result" id="result"></div>
</div>

<script>
               
  const users = {
    'hari007': 'pwd123',
    'sabi19': 'pwd123',
    'meena16': 'pwd123',
    'ham21' : 'pwd123'
    
  };
  let currentUser = '';
  const answers = ['c','c','b','c','b','c','a','b','a','b'];
  const points = Array(10).fill(0);
  const responses = [];

  function login() {
    const u = document.getElementById('username').value;
    const p = document.getElementById('password').value;
    if (localStorage.getItem('attempted_' + u)) {
      document.getElementById('login-error').innerText = 'You have already attempted the quiz.';
      return;
    }
    if (users[u] && users[u] === p) {
      currentUser = u;
      document.getElementById('login-box').style.display = 'none';
      document.getElementById('quiz-box').style.display = 'block';
      loadQuestions();
       document.getElementById("bg-music").play().catch(()=>{});
    } else {
      document.getElementById('login-error').innerText = 'Invalid username or password';
    }
  }

  function loadQuestions() {
    const questions = [
      "There‚Äôs a locked PC. On the monitor, a sticky note reads:<br><b>'Pet + PIN = Password'. </b><br> On the desk:A dog photo labeled: Tommy.<br> A post-it stuck under the mousepad with: 2684 <br><center> <b style= 'color : #8833a1; font-family: Times New Roman; font-size: 30px; text-shadow: -2px -2px 0 #000, 2px -2px 0 #000, -2px 2px 0 #000, 2px 2px 0 #000;';> Question : What is the password?</center></b>",
      "Inside the Recycle Bin, there's a file named: <b>img.jpeg.lnk</b> . <br> When opened, it redirects to a text document that says: ,<br>‚Äú<b>Too lazy to rename. Find me in disguise.‚Äù </b><br> <center> <b style= 'color : #8833a1; font-family: Times New Roman; font-size: 30px; text-shadow: -2px -2px 0 #000, 2px -2px 0 #000, -2px 2px 0 #000, 2px 2px 0 #000;';> Question : What‚Äôs suspicious about the file?</center></b>",
      "There‚Äôs a zip file named <b>'Backup.zip'</b> that asks for a password.<br>Your college is ‚ÄúSRIT‚Äù.<br> <center> <b style= 'color : #8833a1; font-family: Times New Roman; font-size: 30px; text-shadow: -2px -2px 0 #000, 2px -2px 0 #000, -2px 2px 0 #000, 2px 2px 0 #000;';> Question : Based on the previous password (Tommy2684) and the hint, what‚Äôs the stronger version?</center></b><br> ",
      "You open the browser history. A site called <b>'gamefan.com'</b> shows a login with the same password. <br> <center> <b style= 'color : #8833a1; font-family: Times New Roman; font-size: 30px; text-shadow: -2px -2px 0 #000, 2px -2px 0 #000, -2px 2px 0 #000, 2px 2px 0 #000;';> Question : What mistake did the user make?</center></b>",
      "After highlighting the page, you find: <b>‚ÄúOpen the folder Downloads</b>, <br>then check the file with <b>.bak extension.</b>‚Äù <br> <center> <b style= 'color : #8833a1; font-family: Times New Roman; font-size: 30px; text-shadow: -2px -2px 0 #000, 2px -2px 0 #000, -2px 2px 0 #000, 2px 2px 0 #000;';>  Question : What type of file is this?</center></b>",
      "You open the email app. There are 5 saved drafts.<br> Draft #3 has a strange line : <b>‚ÄúThis is what most users ignore. Fix it before someone exploits it.‚Äù</b> <br> <center><b style= 'color : #8833a1; font-family: Times New Roman; font-size: 30px; text-shadow: -2px -2px 0 #000, 2px -2px 0 #000, -2px 2px 0 #000, 2px 2px 0 #000;';> Question : What security feature is often ignored but could have prevented the alert? </center></b>",
      "The inbox shows a new email with the subject :<b> 'Urgent: Your Account Will Be Locked!' <br> The message urges : 'Click this link and log in to confirm your identity.'</b><br> The sender's address is security-update@netfix-support.com. <br> <center> <b style= 'color : #8833a1; font-family: Times New Roman; font-size: 30px; text-shadow: -2px -2px 0 #000, 2px -2px 0 #000, -2px 2px 0 #000, 2px 2px 0 #000;';> Question : What‚Äôs the red flag in the email? </center></b>",
      "You check the Downloads folder and find a file calledn : <b>‚ÄúSecureApp_Setup.exe‚Äù</b> You open it, but nothing happens. Suddenly, the webcam light turns on by itself.<br><center> <b style= 'color : #8833a1; font-family: Times New Roman; font-size: 30px; text-shadow: -2px -2px 0 #000, 2px -2px 0 #000, -2px 2px 0 #000, 2px 2px 0 #000;';> Question : What‚Äôs going wrong here? </center></b>",
      "Clicking the shortcut shows a list of running apps. One stands out : <b>‚ÄúSystem Helper‚Äù</b> ‚Äî it‚Äôs using a lot of internet even when nothing is open. <br> <center> <b style= 'color : #8833a1; font-family: Times New Roman; font-size: 30px; text-shadow: -2px -2px 0 #000, 2px -2px 0 #000, -2px 2px 0 #000, 2px 2px 0 #000;';>  Question : What should you do first to stop the spying?</center></b>",
      "To exit : Follo the link below <b><br> http://escapefromtheroom.com? <br></b> <center> <b style= 'color : #8833a1; font-family: Times New Roman; font-size: 30px; text-shadow: -2px -2px 0 #000, 2px -2px 0 #000, -2px 2px 0 #000, 2px 2px 0 #000;';> Question : Choose the Habit that protects your System ? </center></b> "//To exit, follow the link below <br> http://escapefromtheroom.com <br> <center> <b style= 'color : #8833a1; font-family: Times New Roman; font-size: 30px; text-shadow: -2px -2px 0 #000, 2px -2px 0 #000, -2px 2px 0 #000, 2px 2px 0 #000;';> Enter the habit that protects your System.</b>
    ];
    const options = [
      ['A. 2684Tommy ','B. Tommy2024 ','C.Tommy2684'], 
      ['A. It‚Äôs a compressed photo with a double extension','B.  It‚Äôs just a Windows thumbnail ‚Äî nothing to worry about ','C. It‚Äôs a shortcut, not an image ‚Äî possibly hiding a file'],
      ['A. 2684Tommy@srit','B. Tommy2684#SRIT','C. Backup#TommySRIT'],
      ['A. Saved the game login in browser bookmarks','B. Played games on a non-encrypted website','C. Reused the same password for a non-secure gaming site.'],
      ['A. A temporary browser cache file ‚Äî safe to ignore  ','B.  .bak is a backup file ‚Äî often overlooked but contains sensitive data','C. A broken archive file ‚Äî usually created when downloads fail'],
      ['A. Dual-Network Handshake Protocol','B. Clearing Browser History','C. Two-Factor Authentication (2FA)'],
      ['A. The sender‚Äôs email is fake ‚Äî it‚Äôs not from the real Netflix domain.','B. The email uses an official-looking domain ‚Äî which means it‚Äôs safe ','C. The link says "Click here" instead of using your name ‚Äî it‚Äôs a marketing email.'],
      ['A. The app is updating your webcam drivers ‚Äî that‚Äôs normal behavior.','B. You installed a fake app ‚Äî someone may now be watching your screen and camera.','C. The installation triggered your system‚Äôs camera test protocol'],
      ['A. Turn off the internet (Wi-Fi) right away to stop data from being sent.','B. Close the app and hope it stops','C. Give it some time ‚Äî maybe it‚Äôs doing an update'],
      ['A. Click the link and Escape immediately ','B. No I wont click ‚Äî This could be a Trap ','C. Report the link ‚Äî helps others avoid the threat and alerts security teams']
   ];

    

    const container = document.getElementById('questions');
    container.innerHTML = '';
    for (let i = 0; i < 10; i++) {
      const box = document.createElement('div');
      box.className = 'question-box';
      box.id = 'q' + i;
      if (i === 0) box.classList.add('active');
      box.innerHTML = `<p class="question-text">${i + 1}. ${questions[i]}</p>` +
        options[i].map((opt, idx) => `<button onclick="checkAnswer(${i}, '${String.fromCharCode(97 + idx)}', '${opt}')">${opt}</button>`).join('');
      container.appendChild(box);
    }
  }

  function checkAnswer(qIndex, selected, text) {
    const correct = answers[qIndex];
    const box = document.getElementById('q' + qIndex);
    const resultBox = document.getElementById('result');
    const isCorrect = selected === correct;

    responses.push({ question: qIndex + 1, selected: text, correct: isCorrect });
    
    const clues = [
    "üóùÔ∏è Clue: After login, there‚Äôs a desktop file named secretfile.txt that says: 'Look inside the Recycle Bin... it‚Äôs not really trash.‚Äù",
    "üóùÔ∏è Clue: The text document contains: ‚ÄúThe password you used earlier was weak. Try the stronger version by adding # and your college short name.‚Äù",
    "üóùÔ∏è Clue: Clue inside zip file : A note appears : ‚ÄúThis password was reused somewhere else. Find where.‚Äù",
    "üóùÔ∏è Clue: The site now shows a ‚Äú403 Forbidden‚Äù page ‚Äî with a hidden message in white font. ‚ÄúHighlight to see the truth.‚Äù",
    "üóùÔ∏è Clue: When opened, it shows a list of email drafts with a final clue : ‚ÄúCheck email draft #3 .‚Äù",
    "üóùÔ∏è Clue: Right after, an alert shows : ‚ÄúSecurity notice: Suspicious activity detected. Email from netfix-support.com flagged.‚Äù",
    "üóùÔ∏è Clue: You hover over the link ‚Äî it points to : http://netfix123.co/login A warning flashes on the screen : ‚ÄúFake link detected. Downloaded file may be dangerous. Check your recent downloads.‚Äù",
    "üóùÔ∏è Clue: A message pops up : 'You gave them control. Can you take it back?' A shortcut appears on the desktop : 'End the spy'",
   "üóùÔ∏è Clue: When you switch off Wi-Fi, the strange app closes. A new file appears called : ‚ÄúFinal_Lock.txt‚Äù It says : 'This is your last step. Click the link to Escape'",
   " GREAT CHOICE! : Avoid http ‚Äî is not safe and is not encrypted. So easily the Hackers can intercept or modify your data."
  ];

    if (isCorrect) {
      points[qIndex] = 1;

      // Show clue below the current question
    const clueEl = document.createElement('p');
    clueEl.className = 'hint';
    clueEl.innerText = clues[qIndex];
    box.appendChild(clueEl);

    setTimeout(() => 
    {
      box.classList.remove('active');
      const next = document.getElementById('q' + (qIndex + 1));
      if (next) {
        next.classList.add('active');
      } else {
        resultBox.style.display = 'block';
        resultBox.innerHTML = `üéä CONGRATULATIONS! üéä<br><br> ‚ú® You escaped the Traps ‚ú®<br><br>‚ú® Cracked the Clues ‚ú®<br><br> and <br><br> ‚ú® Beat the Hacker at their own game! ‚ú®  <br>
        <br> <br> <b style = "color : #17ea4f;"> Mission Outcome: ${points.reduce((a,b)=>a+b,0)}/10</b>`;
        
         document.getElementById("bg-music").pause();
  document.getElementById("bg-music").currentTime = 0;

  document.getElementById("win-music").play().catch(()=>{});

         saveCSV();
      }
    },110);
//15000
    } 
    else {
      box.classList.remove('active');
      resultBox.style.display = 'block';
      resultBox.innerHTML = `‚ö†Ô∏è<br><br><b style = "color :  red;"> YOU GOT TRACED!<br><br> üíÄ The Hacker redirects you out üíÄ...</b><br><br><b style = "color : skyblue;">Mission Outcome: ${points.reduce((a,b)=>a+b,0)}/10</b>`;
     
      document.getElementById("bg-music").pause();
  document.getElementById("bg-music").currentTime = 0;

  document.getElementById("fail-music").play().catch(()=>{});

      saveCSV();
    }
  }

  function saveCSV() {
    const score = points.reduce((sum, val) => sum + val, 0);
    const fileName = `user_result_${currentUser}.csv`;
    let content = 'Question,Selected Answer,Correct\n';
    responses.forEach(r => {
      content += `${r.question},"${r.selected}",${r.correct ? 'Yes' : 'No'}\n`;
    });
    content += `Total Score,${score}/10`;

    const blob = new Blob([content], { type: 'text/csv;charset=utf-8;' });
    const a = document.createElement('a');
    a.href = URL.createObjectURL(blob);
    a.download = fileName;
    a.click();

    // Mark user as attempted
    localStorage.setItem('attempted_' + currentUser, 'true');
  }
</script>
</body>
</html>

